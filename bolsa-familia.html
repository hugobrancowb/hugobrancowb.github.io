<!DOCTYPE html>
<html lang="pt">
<head>
	<meta charset="utf-8">
	<title>Mineração de Dados do Portal da Transparência - Uma breve análise dos pagamentos do Bolsa Família ao longo dos anos - Portfólio - Hugo Branco</title>

  <!-- Edit site and author settings in `_config.yml` to make the social details your own -->

    <meta content="Portfólio - Hugo Branco" property="og:site_name">
  
    <meta content="Mineração de Dados do Portal da Transparência - Uma breve análise dos pagamentos do Bolsa Família ao longo dos anos" property="og:title">
  
  
    <meta content="article" property="og:type">
  
  
    <meta content="Estudante de Engenharia de Controle e Automação pela Universidade de Pernambuco (UPE)" property="og:description">
  
  
    <meta content="https://hugobrancowb.github.io//bolsa-familia" property="og:url">
  
  
    <meta content="2020-02-12T13:50:00-03:00" property="article:published_time">
    <meta content="https://hugobrancowb.github.io//about/" property="article:author">
  
  
    <meta content="https://hugobrancowb.github.io//assets/img/bolsa_capa.jpg" property="og:image">
  
  
    
  
  
    
    <meta content="Bolsa Família" property="article:tag">
    
    <meta content="Data Mining" property="article:tag">
    
    <meta content="Mineração de Dados" property="article:tag">
    
    <meta content="Web Scraping" property="article:tag">
    
    <meta content="JavaScript" property="article:tag">
    
  

    <meta name="twitter:card" content="summary">
    <meta name="twitter:site" content="@">
    <meta name="twitter:creator" content="@">
  
    <meta name="twitter:title" content="Mineração de Dados do Portal da Transparência - Uma breve análise dos pagamentos do Bolsa Família ao longo dos anos">
  
  
    <meta name="twitter:url" content="https://hugobrancowb.github.io//bolsa-familia">
  
  
    <meta name="twitter:description" content="Estudante de Engenharia de Controle e Automação pela Universidade de Pernambuco (UPE)">
  
  
    <meta name="twitter:image:src" content="https://hugobrancowb.github.io//assets/img/bolsa_capa.jpg">
  

	<meta name="description" content="Estudante de Engenharia de Controle e Automação pela Universidade de Pernambuco (UPE)">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
	<meta property="og:image" content="">
	<link rel="shortcut icon" href="/assets/img/favicon/fav.ico" type="image/x-icon">
	<link rel="apple-touch-icon" href="/assets/img/favicon/apple-touch-icon.png">
	<link rel="apple-touch-icon" sizes="72x72" href="/assets/img/favicon/apple-touch-icon-72x72.png">
	<link rel="apple-touch-icon" sizes="144x144" href="/assets/img/favicon/apple-touch-icon-144x144.png">
	<!-- Chrome, Firefox OS and Opera -->
	<meta name="theme-color" content="#263959">
	<!-- Windows Phone -->
	<meta name="msapplication-navbutton-color" content="#263959">
	<!-- iOS Safari -->
	<meta name="apple-mobile-web-app-status-bar-style" content="#263959">
	<!-- Google Fonts -->
	<link href="https://fonts.googleapis.com/css?family=PT+Serif:400,700" rel="stylesheet">
	<link href="https://fonts.googleapis.com/css?family=Lato:300,400,700" rel="stylesheet">
	<!-- Font Awesome -->
	<link rel="stylesheet" href="/assets/fonts/font-awesome/css/font-awesome.min.css">
	<!-- Styles -->
  <link rel="stylesheet" href="/assets/css/main.css">
  <!-- jQuery -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
</head>

<body>

  <div class="wrapper">
    <aside class="sidebar">
  <header>
    <div class="about">
      <div class="cover-author-image">
        <a href="/"><img src="/assets/img/profile.jpg" alt="Hugo Branco"></a>
      </div>
      <div class="author-name">Hugo Branco</div>
      <p>Estudante de Engenharia de Controle e Automação pela Universidade de Pernambuco (UPE)</p>
      <a href="/curriculo.pdf" target="_blank" alt="Download CV"><p class="curriculo">Currículo</p></a>    
    </div>
  </header> <!-- End Header -->
  <footer>  
    <section class="contact">
      <h3 class="contact-title">Contato</h3>
      <ul>
        
        
        
          <li class="github"><a href="http://github.com/hugobrancowb" target="_blank"><i class="fa fa-github"></i></a></li>
        
        
          <li class="linkedin"><a href="https://in.linkedin.com/in/hugo-branco-627801136" target="_blank"><i class="fa fa-linkedin"></i></a></li>
        
        
          <li class="email"><a href="mailto:hugobrancowb@gmail.com"><i class="fa fa-envelope-o"></i></a></li>
        
      </ul>
    </section> <!-- End Section Contact -->
    <ul class="languages">      
      
      
      <li><a href="../">Português</a></li>
      
      
      <li><a href="/en/">English</a></li>
      
    </ul>
    <div class="copyright">
      <p>2020 &copy; Hugo Branco</p>
    </div>
  </footer> <!-- End Footer -->
</aside> <!-- End Sidebar -->
<div class="content-box clearfix">
  <article class="article-page">
  <div class="page-content">
    
    <div class="page-cover-image">
      <figure>
        <img class="page-image" src=/assets/img/bolsa_capa.jpg alt="Mineração de Dados do Portal da Transparência - Uma breve análise dos pagamentos do Bolsa Família ao longo dos anos">
        
      </figure>
    </div> <!-- End Page Cover Image -->
    
    <div class="wrap-content">
      <header class="header-page">
        <h1 class="page-title">Mineração de Dados do Portal da Transparência - Uma breve análise dos pagamentos do Bolsa Família ao longo dos anos</h1>
        <div class="page-date"><span>2020, Feb 12&nbsp;&nbsp;&nbsp;&nbsp;</span></div>
           <!-- Idiomas -->
            
            
            
          
          <div class="githubCodeWrap">
            
            <ul class="languages">
              <li ><a class="githubbutton" href="http://github.com/hugobrancowb/bolsa_familia_data" target="_blank"><i class="fa fa-github"></i>Acessar repositório</a></li>
            </ul>
            
          </div>
      </header>
      <h2 id="o-portal-da-transparência">O Portal da Transparência</h2>

<p>O <a href="portaldatransparencia.gov.br/">Portal da Transparência</a> é um site lançado em 2004 com o objetivo de fornecer ao cidadão informações sobre como o dinheiro público do Governo Federal é gasto. O Portal ganhou força quando a <a href="http://www.planalto.gov.br/ccivil_03/_ato2011-2014/2011/lei/l12527.htm">Lei do Acesso à Informação</a> entrou em vigor em 2012 e os órgãos públicos passaram a ser obrigados a publicar informações referentes a despesas, convênios, licitações e contratos, entre outros tipos de conteúdos.</p>

<p>Em 2018 o site ganhou uma nova cara, oferecendo recursos inéditos como maior e melhor oferta de dados abertos, adequação a plataformas móveis, melhor usabilidade e mais recursos gráficos. <a href="https://www.agenciabrasilia.df.gov.br/2020/02/04/portal-da-transparencia-tem-aumento-expressivo-de-audiencia-em-janeiro/">Segundo a Agência Brasília</a>, o site teve aumento de 83% nas visualizações em Janeiro de 2020 quando comparado ao mesmo período do ano anterior.</p>

<p><img src="/assets/img/bolsa_site.png" alt="Novo site e informações disponíveis para o cidadão." /></p>

<p>Na busca de bons exemplos publicados quanto à clareza das informações, me deparo com algumas <a href="http://mds.gov.br/area-de-imprensa/noticias/2019/abril/bolsa-familia-repassa-r-2-6-bilhoes-a-beneficiarios-em-abril">notícias publicadas</a> pela Secretaria Especial do Desenvolvimento Social descrevendo pagamentos do Bolsa Família, programa social do Governo lançado em 2003. Os relatórios são resumidos, diretos e informativos, verdadeiros exemplos, porém encontram-se escondidos em meio às diversas publicações do site, obrigando o usuário a realizar uma pesquisa no site para encontrar, entre as diversas páginas de resultados, dados exclusivamente mensais sobre os pagamentos realizados pelo Programa.</p>

<h3 id="falta-clareza">Falta clareza</h3>

<p>Um grande problema encontrado na forma da qual os dados do Programa Bolsa Família são apresentados é a impossibilidade de obter um resumo generalizado de todos os repasses feitos pelo Governo Federal. Essa falta de clareza na apresentação dos dados vai contra a proposta da Lei de informar o cidadão sobre os gastos públicos através do Portal. A Lei do Acesso à Informação diz que os sites dos órgãos e entidades públicas devem <em>conter ferramenta de pesquisa de conteúdo que permita o acesso à informação de forma objetiva, transparente, clara e em linguagem de fácil compreensão.</em></p>

<p>No Portal da Transparência, os dados de repasse são exibidos <em>apenas</em> de forma mensal e <em>apenas</em> para cada município. Para citar alguns exemplos, o cidadão encontra-se, de certa forma, impossibilitado de acessar o quanto foi repassado para seu estado num determinado mês, o quanto foi repassado para seu município num período de tempo ou mesmo o total repassado pelo governo para o país inteiro. Quando uso a expressão <em>“de certa forma”</em> quero dizer que sim, é possível obter esse tipo de informação (que será exibida durante esse artigo), os dados estão disponíveis, o problema está no escalonamento da informação desejada: para calcular quanto foi repassado para todos os municípios durante o ano de 2019, por exemplo, o cidadão comum deveria acessar mais de 1.200 diferentes páginas para, manualmente, somar mais de 61 mil repasses feitos durante todo o período.</p>

<p>O site até oferece a opção de baixar todos os pagamentos realizados, um mês por vez. Cada arquivo contém cerca de 180 mb a serem baixados numa velocidade bastante lenta, demorando mais de 15 minutos para terminar o <em>download _de um mês</em>._ O arquivo recebido de um único mês é do tipo <code class="highlighter-rouge">.csv</code> e possui mais de 1 GB de tamanho.</p>

<p>Thiago Guimarães, num <a href="https://medium.com/@thiagogsr/trabalhando-com-arquivos-do-portal-da-transpar%C3%AAncia-27d2f2500da5">projeto realizado em 2016</a>, baixou todos arquivos referentes a esse mesmo ano e provou ser inviável para o cidadão comum trabalhar com os dados fornecidos no formato disponível; no total, 7 GB de dados foram descompactados gerando 14 milhões de linhas de dados. Para ter uma noção dessa quantidade de dados, cada <em>worksheet</em> do Excel só permite que pouco mais de 1,04 milhão de linhas sejam carregadas de cada vez.</p>

<p>Decidi então fazer uma análise dos dados disponíveis no Portal sobre a distribuição de verba federal para o Bolsa Família, programa social do Governo lançado em 2003. Os repasses realizados desde 2013 estão disponíveis no Portal para consultas públicas.</p>

<h2 id="mineração-de-dados">Mineração de Dados</h2>

<p>Para obter todos os dados de repasse federal, escrevi alguns códigos em JavaScript a fim de arrecadar todas essas informações sem a necessidade do trabalho manual e excluindo o erro humano de todo processo de seleção e soma de informações. Os repasses são exibidos em tabelas de, no máximo, 50 linhas por página mas o fato de que o conteúdo é carregado através de eventos de JavaScript torna o processo de mineração automatizada muito mais complicado.</p>

<p><img src="/assets/img/bolsa_tabela.png" alt="Amostra da tabela de pagamentos exibida no Portal da Transparência." /></p>

<p>Escrevi três códigos diferentes em JavaScript para cada etapa desse projeto e explico um pouco sobre eles a seguir. Todos códigos utilizados, assim como o <em>dataset</em> obtido nesse processo encontram-se publicamente disponíveis em minha <a href="https://github.com/hugobrancowb/bolsa_familia_data">página do Github</a>.</p>

<h3 id="etapa-1-download-das-informações">Etapa 1: download das informações</h3>

<p>O primeiro código utiliza os módulos <em>Puppeteer</em> e <em>Cheerio</em> para acessar e selecionar os dados da tabela de cada página acessada. <em>Puppeteer</em> trata-se de um navegador web sem interface de usuário: basta que eu forneça os comandos que desejo executar, como acessar um site ou clicar em um link, e o módulo opera de forma automática sem que haja a necessidade de um usuário utilizar o mouse, teclado, ou mesmo estar presente durante a navegação e nos retorna um arquivo de texto com todo o código html obtido na página. A partir daí, <em>Cheerio</em> responsabiliza-se por coletar as informações presentes em determinados trechos da página; no caso desse projeto, trata-se das células da tabela de repasses, que contém as informações de estado, município, mês e ano e o valor do repasse em questão.</p>

<p>O processo de mineração dura algum tempo: além da espera necessária para o carregamento de cada página, o código ainda possui alguns comandos de pausa para prevenir que meu acesso ao Portal fosse bloqueado por excesso de visitas (o que chegou a acontecer). Para evitar que as informações fossem perdidas caso o programa de mineração encontrasse algum erro no processo, todos dados são salvos em arquivo <code class="highlighter-rouge">.json</code> antes de prosseguir para a próxima página. <strong>Como resultado da mineração, foram gerados 9.358 arquivos contendo todas informações coletadas ao longo de 2019.</strong></p>

<h3 id="etapa-2-unificação-dos-dados-obtidos">Etapa 2: unificação dos dados obtidos</h3>

<p>O objetivo principal do segundo programa criado é unir todos arquivos gerados na mineração em apenas um arquivo <code class="highlighter-rouge">.json</code>. Todos 9.358 arquivos gerados na etapa 1 são unificados em um único arquivo <code class="highlighter-rouge">.json</code>, <strong>totalizando 467.826 dados importados.</strong></p>

<h3 id="etapa-3-agrupamento-anual-dos-repasses">Etapa 3: agrupamento anual dos repasses</h3>

<p>Na última etapa, o arquivo <code class="highlighter-rouge">.json</code> que contém todos dados coletados é acessado e as informações de repasse são formatadas de acordo com seu tipo (<em>string</em>, <em>float</em>, etc) e copiadas para diferentes vetores de acordo com a segmentação ou filtro desejado (como todos repasses do estado de Pernambuco ou todos repasses do ano de 2019, por exemplo).</p>

<h2 id="resultados">Resultados</h2>

<p>O total dos pagamentos realizados durante 2019 para cada estado são apresentados abaixo nos formatos barra e mapa espacial. Até o dia da publicação deste artigo, os pagamentos do mês de Dezembro de 2019 ainda não haviam sido adicionados à plataforma.</p>

<p><img src="/assets/img/bolsa_brasil-hm.png" alt="Mapa espacial representando pagamentos do Programa Bolsa Família para cada estado em 2019." /></p>

<p>Para melhor ilustrar a distribuição de renda pelo país, foram criados os dois gráficos tipo pizza abaixo: no primeiro, representa-se os pagamentos realizados para cada região ao longo do ano; já no segundo, esse valor total é dividido número total de habitantes em cada região, mesmo que esses necessariamente não recebam o benefício. Desta forma torna-se mais fácil notar que as regiões Norte e Nordeste estão quase empatadas sendo as regiões que mais necessitam do benefício; a região Sul, por sua vez, recebe a menor quantidade de benefício por habitante.</p>

<p>Por fim, o último gráfico exibe a progressão dos pagamentos para cada ano de dados disponível no Portal. A título de comparação, resolvi dividir cada valor total pelo respectivo salário mínimo de cada ano a fim de mensurar, qualitativamente, se os pagamentos do Programa acompanham ou não o aumento do salário. Como resultado, observamos que de 2014 a 2017 os pagamentos tiveram queda constante em seu valor proporcional, com um indicativo de melhora em 2018. Observe que essa queda acompanhou a crise econômica do país, <a href="https://g1.globo.com/economia/noticia/crise-economica-atrasou-o-desenvolvimento-do-brasil-em-3-anos-aponta-firjan.ghtml">que teve início em 2014</a>.</p>

<blockquote>
  <p>Todos dados utilizados nesse artigo estão <a href="https://github.com/hugobrancowb/bolsa_familia_data">disponíveis em meu repositório no Github</a>. Os gráficos desse post possuem uma versão interativa no mesmo artigo publicado em <a href="https://hugobrancowb.github.io/">hugobrancowb.github.io</a>.</p>
</blockquote>

<h2 id="referências">Referências</h2>

<p>Vetor do mapa do Brasil: <a href="https://freevectormaps.com/brazil/BR-EPS-01-0003?ref=atr">Free Vector Maps</a></p>

<p>Gráficos: <a href="https://plot.ly/javascript/">Plotly</a></p>

<p>Foto: <a href="https://www.flickr.com/photos/agenciasenado/15413884445/">Flickr do Senado Federal</a></p>

      <div class="page-footer">
        <div class="page-share">           
          <a href="https://twitter.com/intent/tweet?text=Mineração de Dados do Portal da Transparência - Uma breve análise dos pagamentos do Bolsa Família ao longo dos anos&url=https://hugobrancowb.github.io//bolsa-familia" title="Share on Twitter" rel="nofollow" target="_blank">Twitter</a>
          <a href="https://facebook.com/sharer.php?u=https://hugobrancowb.github.io//bolsa-familia" title="Share on Facebook" rel="nofollow" target="_blank">Facebook</a>
          <a href="https://linkedin.com/shareArticle?mini=true&source=Portf%C3%B3lio+-+Hugo+Branco&summary=Project portfolio for Artificial Intelligence, Data Science and Web Design projects I’ve worked on.
&title=Minera%C3%A7%C3%A3o+de+Dados+do+Portal+da+Transpar%C3%AAncia+-+Uma+breve+an%C3%A1lise+dos+pagamentos+do+Bolsa+Fam%C3%ADlia+ao+longo+dos+anos&url=https://hugobrancowb.github.io//bolsa-familia" title="Share on LinkedIn" rel="nofollow" target="_blank" data-ml="true">LinkedIn</a>
        </div>
        <div class="page-tag">
          
            <a href="/tags#Bolsa Família" class="tag">&#35; Bolsa Família</a>
          
            <a href="/tags#Data Mining" class="tag">&#35; Data Mining</a>
          
            <a href="/tags#Mineração de Dados" class="tag">&#35; Mineração de Dados</a>
          
            <a href="/tags#Web Scraping" class="tag">&#35; Web Scraping</a>
          
            <a href="/tags#JavaScript" class="tag">&#35; JavaScript</a>
          
        </div>
      </div>
      <section class="comment-area">
  <div class="comment-wrapper">
    
  </div>
</section> <!-- End Comment Area -->

    </div> <!-- End Wrap Content -->
  </div> <!-- End Page Content -->
</article> <!-- End Article Page -->
<script type="text/javascript" src="/assets/js/main.js"}}>
</script>

  <script src="https://cdn.plot.ly/plotly-latest.min.js"></script>
  <script type="text/javascript" src=/assets/js/bolsa-familia.js>
  </script>


</div>

  </div>
  
  <script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
  ga('create', 'UA-156504943-1', 'auto');
  ga('send', 'pageview');
</script> <!-- End Analytics -->

</body>
</html>
